<!DOCTYPE HTML>
<script type="text/javascript">
    var ${object_type}List = new kendo.data.DataSource({
        transport: {
            read: {
                url: "/v1.0/${object_type}s?auth_key=${auth_key}",
                dataType: "json",
            }
        },
        schema: {
            data: function(data) {
                return data["${object_field}"]
            }
        }
    });

    $("#${object_type}AutoComplete").kendoAutoComplete({
        dataSource: ${object_type}List,
    });
    $("#${object_type}DropDown").kendoDropDownList({
        dataSource: ${object_type}List,
    });

    function objectOpen(name) {
        if( !windows["${object_type}-" + name] ) {
            var objectDiv = "${object_type}Window-" + randomId();
            $("#${object_type}Content").append("<div id='" + objectDiv + "' style='padding: 0;'/>");
            $("#" + objectDiv).kendoWindow({
                title: name,
                content: "/reactor/admin/${object_type}.html?auth_key=${auth_key}&${object_type}=" + name,
                actions: ["Maximize", "Minimize", "Close"],
                width: "500px",
                height: "300px",
                modal: false,
                resizable: true,
                draggable: true,
            });
            windows["${object_type}-" + name] = $("#" + objectDiv);
        } else {
            windows["${object_type}-" + name].data("kendoWindow").open();
        }
    }

    $("#${object_type}Text").submit(function(e) {
        e.preventDefault();
        var name = document.forms["${object_type}Text"].elements[0].value;
        objectOpen(name);
    });
    $("#${object_type}List").submit(function(e) {
        e.preventDefault();
        var name = document.forms["${object_type}List"].elements[0].value;
        objectOpen(name);
    });

    function showList() {
        $("#${object_type}ListButton").hide();
        $("#${object_type}TextButton").show();
        $("#${object_type}Text").hide();
        $("#${object_type}List").show();
    }
    function showText() {
        $("#${object_type}ListButton").show();
        $("#${object_type}TextButton").hide();
        $("#${object_type}Text").show();
        $("#${object_type}List").hide();
    }
    $("#${object_type}ListButton").click(function() {
        showList();
    });
    $("#${object_type}TextButton").click(function () {
        showText();
    });
    showText();
</script>

<div class="wrapper">
    <form id="${object_type}Text">
        <input id="${object_type}AutoComplete"/>
        <input type="submit" value="Show">
        &nbsp;|&nbsp;
        <a href="#" id="${object_type}ListButton">List</a>
    </form>
    <form id="${object_type}List">
        <select id="${object_type}DropDown"/>
        <input type="submit" value="Show">
        &nbsp;|&nbsp;
        <a href="#" id="${object_type}TextButton">Find</a>
    </form>
</div>

<div id="${object_type}Content">
</div>
